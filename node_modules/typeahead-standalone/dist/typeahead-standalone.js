!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.typeahead=t():e.typeahead=t()}(this,(()=>(()=>{"use strict";var e,t={588:(e,t,r)=>{r.d(t,{default:()=>u});const n=(...e)=>{},o=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i=e=>null!==e&&"Object"===(null==e?void 0:e.constructor.name),s=(e="")=>e.normalize("NFD").replace(/\p{Diacritic}/gu,""),l=(e,t)=>{const r=e.length;if(!r)return[];if(i(e[0])){for(let n=0;n<r;n++)if(!(t in e[n]))throw new Error("e03");return e}return e.reduce((function(e,r){return e.push({[t]:r&&"string"==typeof r?r:JSON.stringify(r)}),e}),[])},a=async function(e,t){return async function(e){const t=await e.text(),r=t&&JSON.parse(t);return e.ok?r:Promise.reject(r&&r.message||e.statusText)}(await fetch(e,t||{method:"GET"}))};function u(e){var t;if(!e.input)throw new Error("e01");if(!i(e.source))throw new Error("e02");const r=document,u=r.createElement("div"),d=e.debounceRemote||100,c=e.preventSubmit||!1,f=e.minLength||1,p=!1!==e.hint,h=e.autoSelect||!1,m=e.templates,g=((e={})=>{const{hasDiacritics:t}=e;let r={};const n=String.fromCharCode(0);function o(e=""){return e=`${e}`,t&&(e=s(e)),e.toLowerCase().trim().split(/\s+/)}return{add:function(e,t="",i){if(!e)return;let s,l=r;(e=e.constructor===Array?e:[e]).forEach((e=>{o("string"==typeof e?e:e[t]).filter((e=>e)).forEach((t=>{l=r;for(let e=0,r=t.length;e<r;e++)s=t[e],l=l[s]||(l[s]={});const o="string"==typeof e?e:i&&i(e)||JSON.stringify(e);l[n]?l[n][o]=e:l[n]={[o]:e}}))}))},clear:function(){r={}},search:function(e,t){const i=o(e),s=[];let l={};i.forEach((e=>{s.push(function(e){let t,o=r,i={};for(let r=0,n=e.length;r<n;r++)if(t=e[r],o=o[t],void 0===o)return{};const s=[o],l=[e];let a;for(;s.length;)for(a in e=l.pop(),o=s.pop(),o)a!==n?(s.push(o[a]),l.push(e+a)):i=Object.assign(i,o[n]);return i}(e))})),l=s.reduce(((e,t)=>{const r={};return Object.keys(e).filter((e=>t[e])).forEach((t=>{r[t]=e[t]})),r})),l=Object.values(l);const a=l.length;return t&&a>t&&(l.length=t),{suggestions:l,count:a}}}})({hasDiacritics:e.diacritics}),v=e.source.identifier||"label",y=e.source.groupIdentifier||"",b=e=>`${e[v]}`,w=e.display||b,E=e.source.identity||b,C=e.onSubmit||n,x=(null===(t=e.source.dataTokens)||void 0===t?void 0:t.constructor)===Array?e.source.dataTokens:void 0,L={},O={},q=e.source.transform||(e=>e),k=e.source.local||null,A=e.source.remote&&e.source.remote.url&&e.source.remote.wildcard?e.source.remote:null,N=e.source.prefetch&&e.source.prefetch.url?{when:"onInit",done:!1,...e.source.prefetch}:null,S={wrapper:"",input:"tt-input",hint:"tt-hint",highlight:"tt-highlight",hide:"tt-hide",show:"tt-show",list:"tt-list",selected:"tt-selected",header:"tt-header",footer:"tt-footer",loader:"tt-loader",suggestion:"tt-suggestion",group:"tt-group",empty:"tt-empty",notFound:"tt-notFound",...e.classNames||{}};if(!k&&!N&&!A)throw new Error("e02");const T={query:"",items:[],count:0,limit:e.limit||5};let $,j,D=!1,F="";m&&(m.header="function"==typeof m.header?m.header:void 0,m.footer="function"==typeof m.footer?m.footer:void 0,m.notFound="function"==typeof m.notFound?m.notFound:void 0,m.group="function"==typeof m.group?m.group:void 0,m.suggestion="function"==typeof m.suggestion?m.suggestion:void 0,m.loader="function"==typeof m.loader?m.loader:void 0,m.empty="function"==typeof m.empty?m.empty:void 0),k&&ee(l(k,v));const I=e.input;I.classList.add(S.input);const J=window.getComputedStyle(I),P=r.createElement("div");P.className=`typeahead-standalone${e.className?` ${e.className}`:""}${S.wrapper?` ${S.wrapper}`:""}`,T.container=P;const W=I.parentNode,B=[...W.children].indexOf(I);W.removeChild(I),P.appendChild(I),W.insertBefore(P,W.children[B]);const H=I.cloneNode();function R(){if(!N||N.done)return;let e=[];a("function"==typeof N.url?N.url():N.url,null==N?void 0:N.requestOptions).then((t=>{e=q(t),e=l(e,v),ee(e)}),(e=>{console.error("e04",e)})).finally((()=>{"function"==typeof N.process&&N.process(e)})),N.done=!0}p&&function(e){["id","name","placeholder","required","aria-label"].forEach((t=>e.removeAttribute(t))),e.setAttribute("readonly","true"),e.setAttribute("aria-hidden","true"),e.style.marginTop=`-${I.offsetHeight+parseInt(J.marginBottom)}px`,e.tabIndex=-1,e.className=S.hint,I.after(e)}(H),u.classList.add(S.list,S.hide),u.tabIndex=0,u.setAttribute("aria-label","menu-options"),u.setAttribute("role","listbox"),u.style.position="absolute",u.style.width=`${I.offsetWidth}px`,u.style.marginTop=`${I.offsetHeight+parseInt(J.marginTop)}px`,P.appendChild(u),N&&"onInit"===N.when&&R();const z=()=>{u.classList.remove(S.hide)},G=()=>{j&&window.clearTimeout(j)},M=()=>{T.items=[],H.value="",F="",u.classList.add(S.hide)},U=(e=!1)=>{if(!T.items.length&&T.query){M(),V();const t=(null==m?void 0:m.notFound)&&m.notFound(T);if(!t)return!0;const n=e=>{const t=r.createElement("div");t.classList.add(S.notFound),ie(t,e),u.appendChild(t)};return A?(L[JSON.stringify(T.query)]||e&&!D)&&n(t):n(t),z(),!0}},V=()=>{for(;u.firstChild;)u.firstChild.remove()},K=()=>{if(!(null==m?void 0:m.loader))return;if(!D){const e=u.querySelector(`.${S.loader}`);return void(e&&u.removeChild(e))}const e=r.createElement("div");e.classList.add(S.loader),ie(e,m.loader()),(null==m?void 0:m.footer)?u.insertBefore(e,u.querySelector(`.${S.footer}`)):u.appendChild(e)},Q=()=>{var t;if(U())return;V();const n=e=>{const t=r.createElement("div");return t.classList.add(S.suggestion),t.setAttribute("role","option"),t.setAttribute("aria-selected","false"),t.setAttribute("aria-label",w(e)),(null==m?void 0:m.suggestion)?ie(t,m.suggestion(e,T)):t.textContent=e[v]||"",t},o=e=>{const t=r.createElement("div");return t.classList.add(S.group),t.setAttribute("role","group"),t.setAttribute("aria-label",e),(null==m?void 0:m.group)?ie(t,m.group(e,T)):t.textContent=e||"",t},i=r.createDocumentFragment(),s=[];if(null==m?void 0:m.header){const e=r.createElement("div");e.classList.add(S.header),e.setAttribute("role","heading"),e.setAttribute("aria-level","1"),ie(e,m.header(T))&&i.appendChild(e)}for(const[t,r]of T.items.entries()){if(t===T.limit)break;if(r[y]&&!s.includes(r[y])){s.push(r[y]);const e=o(r[y]);i.appendChild(e)}const l=n(r);l.addEventListener("click",(function(e){M(),$=r,I.value=w(r,e),e.preventDefault()})),r===$&&(l.classList.add(S.selected),l.setAttribute("aria-selected","true")),i.appendChild(l),e.highlight&&ne(l,T.query)}if(null==m?void 0:m.footer){const e=r.createElement("div");e.classList.add(S.footer),e.setAttribute("role","heading"),e.setAttribute("aria-level","2"),ie(e,m.footer(T))&&i.appendChild(e)}u.appendChild(i),p&&oe($||T.items[0]),null===(t=u.querySelector(`.${S.selected}`))||void 0===t||t.scrollIntoView({block:"nearest"}),z()},X=()=>{var e,t;G();const n=I.value.replace(/\s{2,}/g," ").trim();if((null==m?void 0:m.empty)&&!n.length){const t=m.empty(T);if(T.query="",null===(e=T.defaultItems)||void 0===e?void 0:e.length)return T.items=l(q(T.defaultItems),v),Q();M(),V();const n=r.createElement("div");return n.classList.add(S.empty),ie(n,t),t&&u.appendChild(n),z()}if(n.length>=f){T.query=n,Z();const e=JSON.stringify(T.query);A&&T.items.length<T.limit&&(null===(t=O[e])||void 0===t?void 0:t.length)&&Z(O[e]),Q(),j=window.setTimeout((function(){T.items.length<T.limit&&!D&&_()}),d)}else T.query="",M()},Y=(t="")=>(e.diacritics&&(t=s(t)),t.toLowerCase()),Z=e=>{let{suggestions:t,count:r}=g.search(T.query,T.limit);if(null==e?void 0:e.length){e.push(...t);const n={};e.forEach((e=>{n[E(e)]=e})),t=Object.values(n),r=t.length}te(t),y&&re(t),T.items=t,T.count=r,$=void 0,h&&T.items.length&&($=T.items[0])},_=()=>{if(!A)return;D=!0;const e=T.query,t=JSON.stringify(e);if(L[t]||!T.query.length)return D=!1,void U(!0);K();let r=[];a(("function"==typeof A.url?A.url():A.url).replace(A.wildcard,e),null==A?void 0:A.requestOptions).then((e=>{r=q(e),r=l(r,v),ee(r)}),(e=>{console.error("e05",e)})).finally((()=>{L[t]=!0,O[t]=r||[],D=!1,K(),r.length&&T.query.length&&(Z(r),Q()),T.query.length&&e!==T.query&&_(),U(!0)}))};function ee(e){e.length&&(g.add(e,v,E),x&&x.forEach((t=>{g.add(e,t,E)})))}const te=e=>{e.sort(((e,t)=>{const r=e[v].toLowerCase().startsWith(T.query.toLowerCase()),n=t[v].toLowerCase().startsWith(T.query.toLowerCase());return r&&!n||r&&e[v].length<t[v].length?-1:0}))},re=e=>{e.sort(((e,t)=>!e[y]||e[y]<t[y]?-1:e[y]>t[y]?1:0))},ne=(t,n)=>{const i=(e,t)=>{let r;for(let n=0;n<e.childNodes.length;n++)r=e.childNodes[n],3===r.nodeType?n+=t(r)?1:0:i(r,t)},l=((e,t)=>{const r=o(e);return new RegExp("("+r+")","i")})(n);n&&i(t,(t=>{var n;let o=l.exec(t.data);e.diacritics&&!o&&(o=l.exec(s(t.data)));const i=r.createElement("span");if(i.className=S.highlight,o){const e=t.splitText(o.index);e.splitText(o[0].length),i.appendChild(e.cloneNode(!0)),null===(n=null==t?void 0:t.parentNode)||void 0===n||n.replaceChild(i,e)}return!!o}))},oe=t=>{const r=I.value;if(r&&w(t)!==r&&0===Y(w(t)).indexOf(Y(r).replace(/\s{2,}/g," ").trimStart())){const n=w(t),i=new RegExp(o(T.query),"i");let l=i.exec(n);e.diacritics&&!l&&(l=i.exec(s(n))),l&&(H.value=r.replace(/\s?$/,"")+n.substring(l[0].length))}else H.value=""},ie=(e,t)=>{const n=r.createElement("template");return n.innerHTML=t,e.appendChild(n.content),t};return u.addEventListener("mousedown",(function(e){e.stopPropagation(),e.preventDefault()})),I.addEventListener("keydown",(e=>{if(!I.value.length||"Esc"===e.key)return M();if(T.items.length&&("ArrowUp"===e.key||"ArrowDown"===e.key))return"ArrowDown"===e.key?(e=>{const t=T.items.length>=T.limit?T.limit:T.items.length;if(!$)return $=T.items[0],void(I.value=w($,e));if($===T.items[t-1])return $=void 0,void(I.value=F);for(let e=0;e<t-1;e++)if($===T.items[e]){$=T.items[e+1];break}I.value=w($,e)})(e):(e=>{const t=T.items.length>=T.limit?T.limit:T.items.length;if($===T.items[0])return $=void 0,void(I.value=F);if($){for(let e=t-1;e>0;e--)if($===T.items[e]||1===e){$=T.items[e-1];break}}else $=T.items[t-1];I.value=w($,e)})(e),Q(),e.preventDefault(),void e.stopPropagation();const t=function(t=!1){if(!$&&t&&T.items.length&&($=T.items[0]),$)return M(),I.value=w($,e),$};if("Enter"===e.key)return c&&e.preventDefault(),void C(e,t());"Tab"!==e.key||u.classList.contains(S.hide)||(e.preventDefault(),t(!0))})),I.addEventListener("input",(e=>{"ArrowDown"!==e.key&&(F=I.value,X())})),I.addEventListener("blur",(()=>{setTimeout((()=>{r.activeElement!==I&&M()}),50)})),I.addEventListener("focus",(()=>{N&&"onFocus"===N.when&&R(),X()})),{destroy:()=>{G(),P.replaceWith(I.cloneNode())}}}}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,n),i.exports}n.m=t,e=[],n.O=(t,r,o,i)=>{if(!r){var s=1/0;for(d=0;d<e.length;d++){for(var[r,o,i]=e[d],l=!0,a=0;a<r.length;a++)(!1&i||s>=i)&&Object.keys(n.O).every((e=>n.O[e](r[a])))?r.splice(a--,1):(l=!1,i<s&&(s=i));if(l){e.splice(d--,1);var u=o();void 0!==u&&(t=u)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[r,o,i]},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0,53:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var o,i,[s,l,a]=r,u=0;if(s.some((t=>0!==e[t]))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(a)var d=a(n)}for(t&&t(r);u<s.length;u++)i=s[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(d)},r=this.webpackChunktypeahead=this.webpackChunktypeahead||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var o=n.O(void 0,[53],(()=>n(588)));return(o=n.O(o)).default})()));
//# sourceMappingURL=typeahead-standalone.js.map